<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TaskMaster</title>

  <!-- Fonts / Global CSS -->
  <link rel="preload" href="assets/fonts/fonts/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="stylesheet" href="assets/CSS/global.css">

  <!-- Page CSS (explicit, one after another) -->
  <link rel="stylesheet" href="templates/login page/login.css">
  <link rel="stylesheet" href="templates/signup page/signup.css">
</head>
<body>
  <div class="app-shell">
    <!-- Templates will be injected here -->
    <div id="templates-root"></div>

    <!-- Footer -->
    <div class="footer">Â© 2024 TaskMaster | Made for University Students</div>
  </div>

  <!-- Global JS (App helper) -->
  <script src="assets/js/global.js"></script>

  <!-- Page JS (explicit) -->
  <script src="templates/login page/login.js" defer></script>
  <script src="templates/signup page/signup.js" defer></script>

  <!-- Loader: fetch and inject external HTML templates (login.html, signup.html) -->
  <script>
    (function loadTemplates() {
      const root = document.getElementById('templates-root');
      const templates = [
        { path: 'templates/login page/login.html', id: 'login-template' },
        { path: 'templates/signup page/signup.html', id: 'signup-template' }
      ];

      // Helper: fetch one file and return its text
      function fetchText(path){
        return fetch(path).then(res => {
          if (!res.ok) throw new Error('Failed to load ' + path);
          return res.text();
        });
      }

      // Load all templates in sequence and insert them into root
      Promise.all(templates.map(t => fetchText(t.path).then(html => ({ id: t.id, html })) ))
        .then(results => {
          results.forEach(r => {
            const wrapper = document.createElement('div');
            wrapper.id = r.id;
            wrapper.className = 'template';
            wrapper.style.display = 'none';
            wrapper.innerHTML = r.html;
            root.appendChild(wrapper);
          });

          // After templates injected, initialize default view
          if (window.App && typeof App.show === 'function') App.show('login-template');
          else {
            const first = document.getElementById('login-template');
            if (first) first.style.display = 'block';
          }
        })
        .catch(err => {
          root.innerHTML = '<p style="color:#8b93a8;padding:20px;text-align:center">Unable to load templates. Open template/login.html and template/signup.html directly while learning.</p>';
          console.error(err);
        });
    })();
  </script>
</body>
</html>

